(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c20e8"],{"494a":function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return y}),i.d(t,"gameFunction",function(){return o});var n,s,a,o,r=i("d225"),d=i("b0b4"),h=i("308d"),c=i("6bb5"),u=i("4e2b"),m=i("64b8"),l=i("3fa0"),f=i("e22e"),p=i("5a62"),g=(i("282c"),[]),b={scale:6,buildingMap:[{id:"k0",name:"stonePortal",coordinateX:0,coordinateY:0,status:"done",finishTime:null},{id:"k5",name:"forest",coordinateX:1,coordinateY:0,status:"done",finishTime:null},{id:"k5",name:"forest",coordinateX:0,coordinateY:1,status:"done",finishTime:null},{id:"k5",name:"forest",coordinateX:1,coordinateY:1,status:"done",finishTime:null},{id:"k4",name:"farm",coordinateX:2,coordinateY:1,status:"done",finishTime:null},{id:"k1",name:"hadesTemple",coordinateX:2,coordinateY:2,status:"done",finishTime:null},{id:"c0",name:"researchCenter",coordinateX:1,coordinateY:3,status:"done",finishTime:null},{id:"k5",name:"forest",coordinateX:2,coordinateY:3,status:"done",finishTime:null},{id:"k5",name:"forest",coordinateX:0,coordinateY:4,status:"done",finishTime:null},{id:"k5",name:"forest",coordinateX:0,coordinateY:5,status:"done",finishTime:null},{id:"k7",name:"stadium",coordinateX:2,coordinateY:5,status:"done",finishTime:null},{id:"c2",name:"resourceTransfer",coordinateX:4,coordinateY:1,status:"done",finishTime:null},{id:"k8",name:"houseB",coordinateX:3,coordinateY:3,status:"done",finishTime:null},{id:"e0",name:"houseA",coordinateX:5,coordinateY:1,status:"done",finishTime:null},{id:"k2",name:"babylon",coordinateX:5,coordinateY:3,status:"done",finishTime:null},{id:"m0",name:"government",coordinateX:4,coordinateY:5,status:"done",finishTime:null},{id:"c1",name:"warehouse",coordinateX:5,coordinateY:4,status:"done",finishTime:null},{id:"k6",name:"ncku",coordinateX:5,coordinateY:5,status:"done",finishTime:null}]},w={southEast:{offset:0,x:2,y:1,opposite:"northWest"},northWest:{offset:20,x:-2,y:-1,opposite:"southEast"},southWest:{offset:224,x:-2,y:1,opposite:"northEast"},northEast:{offset:96,x:2,y:-1,opposite:"southWest"}},k={drive:{startFrame:0,endFrame:19,speed:.02}},y=function(e){function t(){return Object(r["a"])(this,t),Object(h["a"])(this,Object(c["a"])(t).call(this,{key:"HumanMainScene"}))}return Object(u["a"])(t,e),Object(d["a"])(t,[{key:"init",value:function(){console.log("HumanMainScene init"),o=new f["a"](this),n=this,n.buildingGroup=this.add.group(),s=n.input.activePointer,n.add.image(l["w"]/2,l["h"]/2,"bg").setDisplaySize(2*l["w"],2*l["h"]).setScrollFactor(0),n.input.on("pointerdown",function(){p["default"].mutations.setBuildingElement(null,!1),o.cancelJump()}),setInterval(function(){"CANVAS"!==s.downElement.tagName&&(s.isDown=!1)},100),a=n.add.image(l["w"]/2,l["h"]/2,"kyronusDisplayText").setScrollFactor(0),a.depth=1e4,a.alpha=0}},{key:"preload",value:function(){}},{key:"create",value:function(){console.log("HumanMainScene create"),n.events.on("transitioncomplete",function(e,t){l["Obj"].nowScene="HumanMainScene",console.log(l["Obj"]);var i=b.scale;n.cameras.main.setSize(l["w"],l["h"]).centerOn(l["w"]/2,l["h"]/2+48*(i-3)-1500),n.cameras.main.setZoom(1),setTimeout(function(){n.cameras.main.pan(l["w"]/2,l["h"]/2+48*(b.scale-3),3e3,"Quart.easeOut"),n.tweens.add({targets:a,alpha:1,duration:1e3,ease:"Linear",onComplete:function(){n.tweens.add({targets:a,alpha:0,duration:1e3,ease:"Linear",delay:800})}})},250)});var e=new Phaser.Class({Extends:Phaser.GameObjects.Image,initialize:function(e,t,i,n,s,a){this.startX=t,this.startY=i,this.distance=a,this.motion=n,this.anim=k[n],this.direction=w[s],this.speed=.5,this.f=this.anim.startFrame,Phaser.GameObjects.Image.call(this,e,t,i,"car",this.direction.offset+this.f),this.depth=i+192,e.time.delayedCall(1e3*this.anim.speed,this.changeFrame,[],this)},changeFrame:function(){this.f++;var e=this.anim.speed;if(this.f===this.anim.endFrame)switch(this.motion){case"drive":this.f=this.anim.startFrame,this.frame=this.texture.get(this.direction.offset+this.f),n.time.delayedCall(1e3*e,this.changeFrame,[],this);break;default:break}else this.frame=this.texture.get(this.direction.offset+this.f),n.time.delayedCall(1e3*e,this.changeFrame,[],this)},resetAnimation:function(){this.f=this.anim.startFrame,this.frame=this.texture.get(this.direction.offset+this.f),n.time.delayedCall(1e3*this.anim.speed,this.changeFrame,[],this)},update:function(){"drive"===this.motion&&(this.x+=this.direction.x*this.speed,0!==this.direction.y&&(this.y+=this.direction.y*this.speed,this.depth=this.y+192),Phaser.Math.Distance.Between(this.startX,this.startY,this.x,this.y)>=this.distance&&(this.direction=w[this.direction.opposite],this.f,this.anim.startFrame,this.frame=this.texture.get(this.direction.offset+this.f),this.startX=this.x,this.startY=this.y))}});g.push(this.add.existing(new e(this,l["w"]/2-96,l["h"]/2-48-32,"drive","southEast",150).setOrigin(.5,1))),g.push(this.add.existing(new e(this,l["w"]/2+96-16,l["h"]/2+144-32-8,"drive","northWest",300).setOrigin(.5,1))),o.buildMap("tilesKyronus",b.scale),T()}},{key:"update",value:function(){if(g.forEach(function(e){e.update()}),s=n.input.activePointer,s.isDown&&s.getDistance()>10){var e=n.cameras.main.midPoint.x-s.x+s.prevPosition.x,t=n.cameras.main.midPoint.y-s.y+s.prevPosition.y;n.cameras.main.centerOn(e,t)}}}]),t}(m["Scene"]);function T(){b.buildingMap.map(function(e){switch("ing"===e.status&&e.finishTime<=Date.now()&&(console.log("ingæ”¹completed"),e.status="completed",delete e.finishTime),e.status){case"done":o.createBuilding(e.id,e,!1);break;case"completed":o.createBuilding("b1",e,!1);break;case"ing":o.createBuilding("b0",e,!1);break}})}}}]);
//# sourceMappingURL=chunk-2d0c20e8.43a59353.js.map