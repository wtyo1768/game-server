{"version":3,"sources":["webpack:///./src/game/scenes/HumanMainScene.js"],"names":["scene","pointer","text","gameFunction","car","userData","scale","buildingMap","id","name","coordinateX","coordinateY","status","finishTime","directions","southEast","offset","x","y","opposite","northWest","southWest","northEast","anims","drive","startFrame","endFrame","speed","HumanMainScene","Object","C_kyronus_node_modules_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","C_kyronus_node_modules_babel_runtime_corejs2_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","C_kyronus_node_modules_babel_runtime_corejs2_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","key","console","log","GameFunction","buildingGroup","add","group","input","activePointer","image","w","h","setDisplaySize","setScrollFactor","on","Promise","resolve","then","__webpack_require__","bind","module","default","mutations","setBuildingElement","cancelJump","depth","alpha","events","fromScene","duration","Obj","nowScene","mapScale","cameras","main","setSize","centerOn","setTimeout","pan","tweens","targets","ease","onComplete","delay","Car","Phaser","Class","Extends","GameObjects","Image","initialize","motion","direction","distance","startX","startY","anim","f","time","delayedCall","changeFrame","frame","texture","get","resetAnimation","update","Math","Distance","Between","push","existing","setOrigin","buildMap","placeBuildings","forEach","justMoved","midPoint","prevPosition","Scene","map","ele","Date","now","createBuilding"],"mappings":"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","file":"js/chunk-2d0c20e8.07d97edf.js","sourcesContent":["/* eslint-disable */\r\nimport { Scene, Scenes } from 'phaser'\r\nimport { w, h, Obj } from '@/game/scenes/PlayScene.js'\r\nimport GameFunction from '@/game/function/buildFunction.js'\r\nimport { TSParenthesizedType } from 'babel-types';\r\n\r\nlet scene\r\nlet pointer\r\nlet text\r\nlet gameFunction\r\n// let Obj = {}\r\n// Obj.lastTile = null\r\n// Obj.lastCoordinateX = null\r\n// Obj.lastCoordinateY = null\r\nlet car = []\r\nlet userData = {\r\n  scale: 8,\r\n  buildingMap: [\r\n    {\r\n      'id': 'k0',\r\n      'name': 'stonePortal',\r\n      'coordinateX': 0,\r\n      'coordinateY': 0,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k5',\r\n      'name': 'forest',\r\n      'coordinateX': 1,\r\n      'coordinateY': 0,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k5',\r\n      'name': 'forest',\r\n      'coordinateX': 0,\r\n      'coordinateY': 1,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k5',\r\n      'name': 'forest',\r\n      'coordinateX': 1,\r\n      'coordinateY': 1,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k4',\r\n      'name': 'farm',\r\n      'coordinateX': 2,\r\n      'coordinateY': 1,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k1',\r\n      'name': 'hadesTemple',\r\n      'coordinateX': 2,\r\n      'coordinateY': 2,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'c0',\r\n      'name': 'researchCenter',\r\n      'coordinateX': 1,\r\n      'coordinateY': 3,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k5',\r\n      'name': 'forest',\r\n      'coordinateX': 2,\r\n      'coordinateY': 3,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k5',\r\n      'name': 'forest',\r\n      'coordinateX': 0,\r\n      'coordinateY': 4,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k5',\r\n      'name': 'forest',\r\n      'coordinateX': 0,\r\n      'coordinateY': 5,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k7',\r\n      'name': 'stadium',\r\n      'coordinateX': 2,\r\n      'coordinateY': 5,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k4',\r\n      'name': 'farm',\r\n      'coordinateX': 1,\r\n      'coordinateY': 7,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k4',\r\n      'name': 'farm',\r\n      'coordinateX': 2,\r\n      'coordinateY': 7,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k5',\r\n      'name': 'forest',\r\n      'coordinateX': 0,\r\n      'coordinateY': 6,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k5',\r\n      'name': 'forest',\r\n      'coordinateX': 0,\r\n      'coordinateY': 7,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'c2',\r\n      'name': 'resourceTransfer',\r\n      'coordinateX': 4,\r\n      'coordinateY': 1,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k8',\r\n      'name': 'houseB',\r\n      'coordinateX': 5,\r\n      'coordinateY': 0,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'e0',\r\n      'name': 'houseA',\r\n      'coordinateX': 5,\r\n      'coordinateY': 1,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k2',\r\n      'name': 'babylon',\r\n      'coordinateX': 5,\r\n      'coordinateY': 3,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'm0',\r\n      'name': 'government',\r\n      'coordinateX': 4,\r\n      'coordinateY': 5,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'c1',\r\n      'name': 'warehouse',\r\n      'coordinateX': 5,\r\n      'coordinateY': 4,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k6',\r\n      'name': 'ncku',\r\n      'coordinateX': 5,\r\n      'coordinateY': 5,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k3',\r\n      'name': 'church',\r\n      'coordinateX': 4,\r\n      'coordinateY': 6,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k5',\r\n      'name': 'forest',\r\n      'coordinateX': 4,\r\n      'coordinateY': 7,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'c2',\r\n      'name': 'resourceTransfer',\r\n      'coordinateX': 5,\r\n      'coordinateY': 7,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k8',\r\n      'name': 'houseB',\r\n      'coordinateX': 6,\r\n      'coordinateY': 7,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'e0',\r\n      'name': 'houseA',\r\n      'coordinateX': 6,\r\n      'coordinateY': 6,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k5',\r\n      'name': 'forest',\r\n      'coordinateX': 6,\r\n      'coordinateY': 5,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k3',\r\n      'name': 'church',\r\n      'coordinateX': 6,\r\n      'coordinateY': 4,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k6',\r\n      'name': 'ncku',\r\n      'coordinateX': 6,\r\n      'coordinateY': 3,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k8',\r\n      'name': 'houseB',\r\n      'coordinateX': 6,\r\n      'coordinateY': 2,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k4',\r\n      'name': 'farm',\r\n      'coordinateX': 6,\r\n      'coordinateY': 1,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k10',\r\n      'name': 'MRTshadow',\r\n      'coordinateX': 7,\r\n      'coordinateY': 7,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k11',\r\n      'name': 'MRT1',\r\n      'coordinateX': 7,\r\n      'coordinateY': 7,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n    {\r\n      'id': 'k9',\r\n      'name': 'MRT',\r\n      'coordinateX': 7,\r\n      'coordinateY': 7,\r\n      'status': 'done',\r\n      'finishTime': null\r\n    },\r\n  ]\r\n}\r\n\r\n// const w = document.body.clientWidth\r\n// const h = document.body.clientHeight\r\nconst directions = {\r\n  southEast: { offset: 0, x: 2, y: 1, opposite: 'northWest' },\r\n  northWest: { offset: 20, x: -2, y: -1, opposite: 'southEast' },\r\n  southWest: { offset: 224, x: -2, y: 1, opposite: 'northEast' },\r\n  northEast: { offset: 96, x: 2, y: -1, opposite: 'southWest' }\r\n}\r\nconst anims = {\r\n  drive: { startFrame: 0, endFrame: 19, speed: 0.02 }\r\n}\r\n\r\nexport default class HumanMainScene extends Scene {\r\n  constructor () {\r\n    super({ key: 'HumanMainScene' })\r\n  }\r\n  init () {\r\n    console.log('HumanMainScene init')\r\n    gameFunction = new GameFunction(this)\r\n\r\n    scene = this\r\n    scene.buildingGroup = this.add.group()\r\n\r\n    // 設定游標\r\n    pointer = scene.input.activePointer\r\n\r\n    // 設定背景\r\n    scene.add.image(w/2, h/2, 'bg').setDisplaySize(2*w, 2*h).setScrollFactor(0)\r\n    \r\n    // 畫面點擊事件\r\n    scene.input.on('pointerdown', function() {\r\n      import('../../store/modules/planet').then(module => {\r\n        module.default.mutations.setBuildingElement(null, false)\r\n      })\r\n      gameFunction.cancelJump()\r\n    })\r\n\r\n    text = scene.add.image(w/2, h/2 ,'kyronusDisplayText').setScrollFactor(0)\r\n    text.depth = 10000\r\n    text.alpha = 0\r\n  }\r\n  preload () {\r\n    // let url\r\n    // url = 'https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/plugins/dist/rexpinchplugin.min.js'\r\n    // this.load.plugin('rexpinchplugin', url, true)\r\n  }\r\n  create () {\r\n    console.log('HumanMainScene create')\r\n    // gameFunction = new GameFunction(this)\r\n    \r\n    scene.events.on('transitioncomplete', function(fromScene, duration){\r\n      Obj.nowScene = 'HumanMainScene'\r\n      console.log(Obj)\r\n      let mapScale = userData.scale\r\n      scene.cameras.main.setSize(w, h).centerOn(w/2, h/2+(mapScale-3)*48 - 1500)\r\n      // scene.cameras.main.setZoom(0.5)\r\n\r\n      \r\n      setTimeout(() => {\r\n        // gameFunction.zoomInOut(1, 1000, 'Quart.easeOut')\r\n        scene.cameras.main.pan(w/2, h/2+(userData.scale-3)*48, 3000, 'Quart.easeOut')\r\n        // 呈現字\r\n          scene.tweens.add({\r\n            targets: text,\r\n            alpha: 1,\r\n            duration: 1000,\r\n            ease: 'Linear',\r\n            onComplete: function () {\r\n              scene.tweens.add({\r\n                targets: text,\r\n                alpha: 0,\r\n                duration: 1000,\r\n                ease: 'Linear',\r\n                delay: 800\r\n              })\r\n            }\r\n          })\r\n      }, 250)\r\n    })\r\n\r\n    // pinch\r\n    // var dragScale = scene.plugins.get('rexpinchplugin').add(scene);\r\n    // dragScale.on('drag1', function (dragScale) {\r\n    //   var drag1Vector = dragScale.drag1Vector;\r\n    //   scene.cameras.main.scrollX -= drag1Vector.x / scene.cameras.main.zoom;\r\n    //   scene.cameras.main.scrollY -= drag1Vector.y / scene.cameras.main.zoom;\r\n    // }).on('pinch', function (dragScale) {\r\n    //   var scaleFactor = dragScale.scaleFactor\r\n    //   scene.cameras.main.zoom *= scaleFactor\r\n    //   if(scene.cameras.main.zoom <= 0.5){\r\n    //     scene.cameras.main.zoom = 0.5\r\n    //   } else if (scene.cameras.main.zoom >= 2){\r\n    //     scene.cameras.main.zoom = 2\r\n    //   }\r\n    // }, scene)\r\n\r\n    // moving sprite car\r\n    let Car = new Phaser.Class({\r\n      Extends: Phaser.GameObjects.Image,\r\n      initialize:\r\n      function Car (scene, x, y, motion, direction, distance){\r\n        this.startX = x\r\n        this.startY = y\r\n        this.distance = distance\r\n        this.motion = motion\r\n        this.anim = anims[motion]\r\n        this.direction = directions[direction]\r\n        this.speed = 0.5\r\n        this.f = this.anim.startFrame\r\n\r\n        Phaser.GameObjects.Image.call(this, scene, x, y, 'car', this.direction.offset + this.f)\r\n        this.depth = y + 192\r\n        scene.time.delayedCall(this.anim.speed * 1000, this.changeFrame, [], this)\r\n      },\r\n      changeFrame: function () {\r\n        this.f++\r\n        let delay = this.anim.speed;\r\n        if (this.f === this.anim.endFrame){\r\n          switch (this.motion) {\r\n            case 'drive':\r\n              this.f = this.anim.startFrame\r\n              this.frame = this.texture.get(this.direction.offset + this.f)\r\n              scene.time.delayedCall(delay * 1000, this.changeFrame, [], this)\r\n              break\r\n            default:\r\n              break\r\n          }\r\n        } else {\r\n          this.frame = this.texture.get(this.direction.offset + this.f)\r\n          scene.time.delayedCall(delay * 1000, this.changeFrame, [], this)\r\n        }\r\n      },\r\n      resetAnimation: function () {\r\n        this.f = this.anim.startFrame\r\n        this.frame = this.texture.get(this.direction.offset + this.f)\r\n        scene.time.delayedCall(this.anim.speed * 1000, this.changeFrame, [], this)\r\n      },\r\n      update: function () {\r\n        if ( this.motion === 'drive'){\r\n          this.x += this.direction.x * this.speed\r\n\r\n          if(this.direction.y !== 0){\r\n            this.y += this.direction.y * this.speed\r\n            this.depth = this.y + 192\r\n          }\r\n\r\n          // drive far enough?\r\n          if (Phaser.Math.Distance.Between(this.startX, this.startY, this.x, this.y) >= this.distance){\r\n            this.direction = directions[this.direction.opposite]\r\n            this.f - this.anim.startFrame\r\n            this.frame = this.texture.get(this.direction.offset + this.f)\r\n            this.startX = this.x\r\n            this.startY = this.y\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    car.push(this.add.existing(new Car(this, w/2-96, h/2-96/2-32, 'drive', 'southEast', 150).setOrigin(0.5, 1)))\r\n    car.push(this.add.existing(new Car(this, w/2+1*96-16, h/2+3*96/2-32-8, 'drive', 'northWest', 300).setOrigin(0.5, 1)))\r\n\r\n    gameFunction.buildMap('tilesKyronus' , userData.scale)\r\n \r\n    placeBuildings()\r\n\r\n    // set camera init position\r\n    // let mapScale = userData.scale\r\n    // scene.cameras.main.setSize(w, h).centerOn(w/2, h/2+(mapScale-3)*48)\r\n    // scene.cameras.main.setZoom(0.5)\r\n    // setTimeout(() => {\r\n    //   gameFunction.zoomInOut(1, 1000, 'Quart.easeOut')\r\n    // }, 250)\r\n  }\r\n\r\n  update () {\r\n    car.forEach(function (car) { car.update() })\r\n    \r\n    // drag camera\r\n    // pointer = scene.input.activePointer\r\n    if(pointer.justMoved){\r\n      let x = scene.cameras.main.midPoint.x - pointer.x + pointer.prevPosition.x\r\n      let y = scene.cameras.main.midPoint.y - pointer.y + pointer.prevPosition.y\r\n      scene.cameras.main.centerOn(x, y)\r\n    }\r\n  }\r\n}\r\n\r\n// function getBuildingMap (scale, map) {\r\n//   userData.scale = scale\r\n//   userData.buildingMap = map\r\n// }\r\n\r\nfunction placeBuildings () {\r\n  userData.buildingMap.map(ele => {\r\n    if (ele.status === 'ing') {\r\n      if (ele.finishTime <= Date.now()){\r\n        console.log('ing改completed')\r\n        ele.status = 'completed'\r\n        delete ele.finishTime\r\n      }\r\n    }\r\n\r\n    switch (ele.status) {\r\n      case 'done':\r\n        gameFunction.createBuilding(ele.id, ele, false)\r\n        break\r\n      case 'completed':\r\n        gameFunction.createBuilding('b1', ele, false)\r\n        break\r\n      case 'ing':\r\n        gameFunction.createBuilding('b0', ele, false)\r\n        break\r\n    }\r\n  })\r\n}\r\n\r\nexport { gameFunction }"],"sourceRoot":""}